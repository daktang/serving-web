<!-- public/index.html — dev용: portal 절대 URL 중 /api, /ext-dit/api 만 프록시로 유도 -->
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="theme-color" content="#000000" />
  <link rel="icon" type="image/png" id="fevicon" href="images/icons/favicon.png" sizes="32x32">

  <script src="config.js"></script>
  <script src="//code.jquery.com/jquery-1.4.2.min.js"></script>
  <script src="//cdn.socket.io/4.4.1/socket.io.min.js"></script>

  <script>
  (function () {
    var HOST = 'portal.aiserving.dev.aip.domain.net';
    var PREFIX = ['/api/', '/ext-dit/api/'];
    function toLocal(u){
      if (typeof u !== 'string' || !/^https?:\/\//i.test(u)) return u;
      try {
        var x = new URL(u);
        if (x.hostname !== HOST) return u;
        for (var i=0;i<PREFIX.length;i++){
          if (x.pathname.indexOf(PREFIX[i])===0) return x.pathname + x.search;
        }
      } catch(e){}
      return u;
    }
    var F = window.fetch;
    if (F) window.fetch = function(i,o){
      var u = (typeof i==='string') ? i : (i && i.url);
      if (u){ var nu = toLocal(u); if (nu!==u) i = (typeof i==='string') ? nu : new Request(nu,i); }
      return F(i,o);
    };
    if (window.XMLHttpRequest){
      var _o = XMLHttpRequest.prototype.open;
      XMLHttpRequest.prototype.open = function(m,u){ arguments[1]=toLocal(u); return _o.apply(this,arguments); };
    }
  })();
  </script>

  <script>document.title = window.config.applicationTitle || window.config.applicationName;</script>
</head>
<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root" class="grip-resizable"></div>
</body>
</html>
